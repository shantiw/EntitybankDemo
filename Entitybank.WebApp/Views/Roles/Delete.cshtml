
@{
    ViewBag.Title = "Role";
}

<br />

<form id="form">
    <input class="btn btn-danger" type="submit" value="Delete" data-redirect-url="/Admin/Roles/Index" />
    <input class="btn btn-info" type="button" value="Return" onclick="javascript:history.go(-1)" />

    <div data-plugin="errorRenderer" class="col-sm-offset-1 text-danger">
    </div>
</form>

<hr />

@Html.Partial("_Details")


@section scripts
{
    <script src="~/Scripts/moment.min.js"></script>
    <script src="~/frontend/xfront/js/xfront.js"></script>

    <script>
        $(document).ready(function () {
            $.getJSON('/json', {}, function (data, textStatus, jqXHR) {
                $('#details').renderer(data);
            });

            $(':submit').click(function (event) {
                event.preventDefault();
                $.delete('/json')
                    .done(function (data, textStatus, jqXHR) {
                        var redirect = $(':submit').attr("data-redirect-url") + window.location.search;
                        window.location.href = redirect;
                    })
                    .fail(function (jqXHR, textStatus, errorThrown) {
                        $('[data-plugin=errorRenderer]').errorRenderer(jqXHR.responseJSON);
                    });
            });
        });
    </script>
}
